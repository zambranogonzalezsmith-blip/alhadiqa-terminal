<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>AL-HADIQA FX | ELITE STRATEGY V.12</title>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <style>
        :root {
            --bg: #040508; --panel: #0d1117; --gold: #c5a059; --fx-blue: #2962ff;
            --win: #00c853; --loss: #ff1744; --border: rgba(197, 160, 89, 0.2);
        }
        * { box-sizing: border-box; font-family: 'Inter', 'JetBrains Mono', monospace; margin: 0; padding: 0; }
        body { background: var(--bg); color: #eceff1; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* HEADER ESTRATÉGICO */
        .fx-header { 
            height: 35%; background: var(--panel); border-bottom: 2px solid var(--border); 
            display: grid; grid-template-columns: 1fr 1.5fr 1fr; padding: 15px; gap: 20px;
        }

        .info-card { background: rgba(0,0,0,0.4); border: 1px solid var(--border); padding: 12px; border-radius: 4px; }
        .label { font-size: 10px; color: var(--gold); letter-spacing: 1px; font-weight: bold; margin-bottom: 5px; display: block; }
        
        /* SESIONES LIVE */
        .session-status { display: flex; gap: 10px; margin-top: 5px; }
        .session-tag { padding: 4px 8px; border-radius: 3px; font-size: 9px; border: 1px solid #333; opacity: 0.4; }
        .session-active { opacity: 1; border-color: var(--fx-blue); color: var(--fx-blue); background: rgba(41, 98, 255, 0.1); }

        /* BOTONES DE ACCIÓN FX */
        .fx-btn { 
            width: 100%; padding: 14px; border: none; border-radius: 4px; color: #000; 
            font-weight: 900; cursor: pointer; text-transform: uppercase; transition: 0.2s;
            margin-bottom: 8px; font-size: 12px;
        }
        .buy-btn { background: var(--win); box-shadow: 0 4px 15px rgba(0,200,83,0.3); }
        .sell-btn { background: var(--loss); box-shadow: 0 4px 15px rgba(255,23,68,0.3); }

        /* CHART AREA */
        .fx-chart { flex: 1; position: relative; }
        
        .lux-fx-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 100; pointer-events: none; display: none; text-align: center;
        }
        .lux-fx-arrow { font-size: 90px; filter: drop-shadow(0 0 20px rgba(0,0,0,0.8)); }
    </style>
</head>
<body>

    <header class="fx-header">
        <div class="info-card">
            <span class="label">ESTADO DE SESIONES FX</span>
            <div class="session-status">
                <div id="s-london" class="session-tag">LONDRES</div>
                <div id="s-newyork" class="session-tag">NUEVA YORK</div>
                <div id="s-tokyo" class="session-tag">TOKIO</div>
            </div>
            <div style="margin-top: 15px;">
                <span class="label">PAR ACTUAL</span>
                <div id="fx-pair" style="font-size: 20px; font-weight: bold; color: var(--fx-blue);">EUR / USD</div>
            </div>
        </div>

        <div class="info-card">
            <span class="label">ALGORITMO DE REVERSIÓN (DIVERGENCIA + SMC)</span>
            <div id="algo-scanner" style="font-size: 11px; color: #78909c; line-height: 1.6; height: 80px; overflow-y: auto;">
                > Escaneando máximos de sesión...<br>
                > Buscando barrido de liquidez (Liquidity Sweep)...
            </div>
        </div>

        <div class="info-card" style="border-left: 3px solid var(--gold);">
            <span class="label">GESTIÓN DE RIESGO (1%)</span>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                    <span>LOTES SUGERIDOS:</span>
                    <span id="fx-lots" style="color:var(--win); font-weight:bold;">0.00 LOTS</span>
                </div>
                <button class="fx-btn buy-btn" onclick="executeFX('BUY')">EJECUTAR COMPRA</button>
                <button class="fx-btn sell-btn" onclick="executeFX('SELL')">EJECUTAR VENTA</button>
            </div>
        </div>
    </header>

    <main class="fx-chart">
        <div id="lux-fx" class="lux-fx-overlay">
            <div id="lux-fx-arrow" class="lux-fx-arrow">▲</div>
            <div style="background:rgba(0,0,0,0.9); padding:5px 15px; border:1px solid var(--gold); font-size:12px; font-weight:bold;">FX SIGNAL VALIDATED</div>
        </div>
        <div id="tv-fx-chart" style="width:100%; height:100%"></div>
    </main>

    <script>
        let tvWidget;

        function initFXChart() {
            tvWidget = new TradingView.widget({
                "autosize": true, "symbol": "FX:EURUSD", "interval": "15",
                "timezone": "Etc/UTC", "theme": "dark", "container_id": "tv-fx-chart",
                "style": "1", "locale": "es", "allow_symbol_change": true,
                "studies": [
                    "RSI@tv-basicstudies",
                    "MAExp@tv-basicstudies"
                ]
            });
            updateSessions();
        }

        function updateSessions() {
            const hour = new Date().getUTCHours();
            // Londres: 8-16 UTC | NY: 13-21 UTC | Tokio: 0-9 UTC
            if(hour >= 8 && hour < 16) document.getElementById('s-london').classList.add('session-active');
            if(hour >= 13 && hour < 21) document.getElementById('s-newyork').classList.add('session-active');
            if(hour >= 0 && hour < 9) document.getElementById('s-tokyo').classList.add('session-active');
        }

        function executeFX(dir) {
            const scanner = document.getElementById('algo-scanner');
            const lux = document.getElementById('lux-fx');
            const arrow = document.getElementById('lux-fx-arrow');
            
            // Simulación de cálculo de lotaje Forex (Estándar 100k)
            // Arriesgando 10 pips en una cuenta de $1000 con 1% de riesgo
            const lotResult = "0.10"; 
            document.getElementById('fx-lots').innerText = lotResult + " LOTS";

            // Visualización
            lux.style.display = "block";
            arrow.innerText = dir === 'BUY' ? "▲" : "▼";
            arrow.style.color = dir === 'BUY' ? "var(--win)" : "var(--loss)";
            
            scanner.innerHTML = `> ORDEN ${dir} GENERADA <br>` + 
                                `> RRR 1:3 SET <br>` +
                                `> STOP LOSS: 10 Pips <br>` +
                                `> TAKE PROFIT: 30 Pips`;

            setTimeout(() => { lux.style.display = "none"; }, 4000);
        }

        window.onload = initFXChart;
    </script>
</body>
</html>
